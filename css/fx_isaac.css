:root {
  --ink:#e7eefb;
  --muted:#9bb2d4;
  --panel:#0f1726;
  --edge:#223553;
  --primary:#78a2ff;
  --accent:#9ad6ff;
}

* { box-sizing: border-box; }
html, body {
  height: 100%;
  margin: 0;
  background: #000;
  font-family: "Noto Sans TC","PingFang TC",sans-serif;
  color: var(--ink);
  overflow: hidden;
}

/* === 360容器 === */
#panoMount, .panolens-container {
  position: fixed !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  z-index: 0 !important;
  background: #000;
}

/* === UI === */
#ui {
  position: fixed;
  inset: 0;
  z-index: 10;
  pointer-events: none;
}

.topbar {
  position: absolute;
  left: 18px;
  right: 18px;
  top: 12px;
  display: flex;
  gap: 12px;
  align-items: center;
  pointer-events: auto;
}

.chip {
  background: #152238;
  color: #cfe1ff;
  border: 1px solid var(--edge);
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 13px;
  cursor: pointer;
  transition: .2s;
}
.chip:hover { background: #223a63; color: #fff; }

.spacer { flex: 1; }

/* 狀態列 */
.hud {
  position: absolute;
  left: 18px;
  right: 18px;
  top: 58px;
  display: flex;
  gap: 24px;
  align-items: center;
  pointer-events: auto;
}
.coins {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #122036cc;
  border: 1px solid #27426e;
  padding: 8px 12px;
  border-radius: 999px;
}
.bars { display: flex; gap: 22px; }
.bar { width: 200px; }
.bar label {
  display: block;
  font-size: 12px;
  color: #b9c8e6;
  margin-bottom: 4px;
}
.meter {
  height: 6px;
  background: #0d1830;
  border: 1px solid #1e2c47;
  border-radius: 999px;
  overflow: hidden;
}
.meter span {
  display: block;
  height: 100%;
  background: linear-gradient(90deg,#4aa3ff,#9ad6ff);
  width: 70%;
}

/* 熱點 */
#hotspots {
  position: absolute;
  bottom: 38%;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  pointer-events: auto;
}
.hotbtn {
  background: rgba(20,30,50,.8);
  color: #dff2ff;
  border: 1px solid #27426e;
  padding: 10px 14px;
  border-radius: 14px;
  font-size: 14px;
  cursor: pointer;
  transition: .25s;
}
.hotbtn:hover { background: #355c9a; }

/* 對話框 */
.dialog {
  position: fixed;
  left: 18px;
  right: 18px;
  bottom: 18px;
  background: rgba(10,20,35,.85);
  backdrop-filter: blur(8px);
  border: 1px solid #1a2a44;
  border-radius: 22px;
  padding: 18px 22px;
  display: grid;
  grid-template-columns: 88px 1fr auto;
  gap: 18px;
  align-items: end;
  z-index: 20;
  pointer-events: auto;
}
.avatar img {
  width: 88px;
  height: 88px;
  border-radius: 16px;
  object-fit: cover;
  border: 1px solid #273a5a;
}
.who { font-weight: 700; font-size: 18px; }
.line { font-size: 18px; }
.btn {
  background: #173055;
  color: #e7f1ff;
  border: 1px solid #27426e;
  border-radius: 12px;
  padding: 10px 14px;
  font-size: 14px;
  cursor: pointer;
}
.btn:hover { background: #295a9c; }

/* 任務清單 */
#questPanel {
  position: fixed;
  right: 20px;
  top: 100px;
  width: 240px;
  background: rgba(10,18,30,.75);
  border: 1px solid #20314c;
  border-radius: 14px;
  padding: 12px 16px;
  backdrop-filter: blur(6px);
  z-index: 15;
  pointer-events: auto;
}
#questPanel h3 {
  margin: 0 0 6px;
  font-size: 16px;
  color: #9ad6ff;
}
#questPanel ul {
  list-style: none;
  margin: 0;
  padding: 0;
}
#questPanel li {
  margin: 4px 0;
  color: #cde0ff;
}

/* 快捷鍵 */
.shortcut {
  position: fixed;
  left: 18px;
  bottom: 118px;
  display: flex;
  gap: 10px;
  z-index: 15;
  pointer-events: auto;
}
.shortcut .chip {
  background: #0f2747cc;
  border-color: #2e507e;
}

/* 返回 */
#returnGame {
  position: fixed;
  right: 36px;
  bottom: 138px;
  background: #173055;
  color: #fff;
  border: 1px solid #2a4b7a;
  border-radius: 50%;
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  box-shadow: 0 0 20px #9ad6ff80;
  cursor: pointer;
  transition: .25s;
  z-index: 16;
}
#returnGame:hover {
  transform: scale(1.08);
  box-shadow: 0 0 28px #9ad6ffcc;
}
/* --- 修正快捷鍵層級與點擊 --- */
.shortcut {
  position: fixed;
  left: 24px;
  bottom: 150px;
  display: flex;
  gap: 10px;
  z-index: 50 !important;
  pointer-events: auto !important;
}
.shortcut .chip {
  background: rgba(15, 39, 71, 0.9);
  border-color: #2e507e;
  box-shadow: 0 0 8px rgba(0,0,0,.5);
}
/* --- 修正 Panolens 與 UI 層級 --- */
.panolens-container,
#panoMount{
  position:fixed!important;
  inset:0!important;
  width:100%!important;
  height:100%!important;
  z-index:0!important;
}
#ui{
  position:fixed;
  inset:0;
  z-index:50!important;
  pointer-events:auto!important;
}
.hotbtn,.chip,.btn,.shortcut{
  pointer-events:auto!important;
}
